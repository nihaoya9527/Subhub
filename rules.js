// é¢„è®¾è§„åˆ™åˆ—è¡¨
export const DEFAULT_RULES = `
ruleset=ðŸŽ¯ å…¨çƒç›´è¿ž,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list
ruleset=ðŸŽ¯ å…¨çƒç›´è¿ž,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list
ruleset=ðŸ›‘ å¹¿å‘Šæ‹¦æˆª,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list
ruleset=ðŸƒ åº”ç”¨å‡€åŒ–,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list
ruleset=ðŸ†Ž AdBlock,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyList.list
ruleset=ðŸ†Ž AdBlock,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyListChina.list
ruleset=ðŸ›¡ï¸ éšç§é˜²æŠ¤,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyPrivacy.list
ruleset=ðŸ“¢ è°·æ­ŒFCM,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleFCM.list
ruleset=ðŸ’° åŠ å¯†è´§å¸,https://raw.githubusercontent.com/Troywww/singbox_conf/refs/heads/main/rules_list/crypto.list
ruleset=ðŸŽ¯ å…¨çƒç›´è¿ž,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GoogleCN.list
ruleset=ðŸŽ¯ å…¨çƒç›´è¿ž,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/SteamCN.list
ruleset=â“‚ï¸ å¾®è½¯Bing,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Bing.list
ruleset=â“‚ï¸ å¾®è½¯äº‘ç›˜,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/OneDrive.list
ruleset=â“‚ï¸ å¾®è½¯æœåŠ¡,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Microsoft.list
ruleset=ðŸŽ è‹¹æžœæœåŠ¡,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Apple.list
ruleset=ðŸ“² ç”µæŠ¥æ¶ˆæ¯,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Telegram.list
ruleset=ðŸ’¬ OpenAi,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/OpenAi.list
ruleset=ðŸŽ¶ ç½‘æ˜“éŸ³ä¹,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/NetEaseMusic.list
ruleset=ðŸŽ® æ¸¸æˆå¹³å°,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Epic.list
ruleset=ðŸŽ® æ¸¸æˆå¹³å°,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Origin.list
ruleset=ðŸŽ® æ¸¸æˆå¹³å°,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Sony.list
ruleset=ðŸŽ® æ¸¸æˆå¹³å°,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Steam.list
ruleset=ðŸŽ® æ¸¸æˆå¹³å°,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Nintendo.list
ruleset=ðŸ“¹ æ²¹ç®¡è§†é¢‘,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/YouTube.list
ruleset=ðŸŽ¥ å¥ˆé£žè§†é¢‘,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Netflix.list
ruleset=ðŸ“º å·´å“ˆå§†ç‰¹,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Bahamut.list
ruleset=ðŸ“º å“”å“©å“”å“©,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/BilibiliHMT.list
ruleset=ðŸ“º å“”å“©å“”å“©,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Bilibili.list
ruleset=ðŸŒ å›½å†…åª’ä½“,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaMedia.list
ruleset=ðŸŒ å›½å¤–åª’ä½“,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyMedia.list
ruleset=ðŸš€ èŠ‚ç‚¹é€‰æ‹©,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list
ruleset=ðŸŽ¯ å…¨çƒç›´è¿ž,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list
ruleset=ðŸŽ¯ å…¨çƒç›´è¿ž,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list
ruleset=ðŸŽ¯ å…¨çƒç›´è¿ž,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Download.list
ruleset=ðŸŽ¯ å…¨çƒç›´è¿ž,[]GEOIP,CN
ruleset=ðŸŸ æ¼ç½‘ä¹‹é±¼,[]MATCH
`.trim();

// è§£æžè§„åˆ™å­—ç¬¦ä¸²ä¸ºæ•°ç»„
export function parseRules(rulesStr) {
  return rulesStr
    .split('\n')
    .filter(line => line && !line.startsWith(';'))  // è¿‡æ»¤ç©ºè¡Œå’Œæ³¨é‡Š
    .map(line => {
      const [_, name, url] = line.match(/ruleset=([^,]+),(.+)/);
      // å¤„ç†ç‰¹æ®Šæ ¼å¼çš„è§„åˆ™
      if (url.startsWith('[]')) {
        const ruleName = url.substring(2); // åŽ»æŽ‰å¼€å¤´çš„ []
        return {
          name,
          url: url,
          displayName: ruleName // ä½¿ç”¨ [] åŽé¢çš„éƒ¨åˆ†ä½œä¸ºæ˜¾ç¤ºåç§°
        };
      }
      // æ™®é€š URL è§„åˆ™
      return {
        name,
        url,
        displayName: url.split('/').pop() // ä½¿ç”¨ URL çš„æœ€åŽä¸€éƒ¨åˆ†ä½œä¸ºæ˜¾ç¤ºåç§°
      };
    });
}

// åˆ†æµè§„åˆ™æŽ’åºé…ç½®
export const ROUTING_ORDER = [
  "ðŸ’° åŠ å¯†è´§å¸",
  "ðŸ“² ç”µæŠ¥æ¶ˆæ¯",
  "ðŸ’¬ OpenAi",
  "ðŸ“¹ æ²¹ç®¡è§†é¢‘",
  "ðŸŽ¥ å¥ˆé£žè§†é¢‘",
  "ðŸŒ å›½å¤–åª’ä½“",
  "ðŸŒ å›½å†…åª’ä½“",
  "ðŸ“¢ è°·æ­ŒFCM",
  "â“‚ï¸ å¾®è½¯äº‘ç›˜",
  "â“‚ï¸ å¾®è½¯æœåŠ¡",
  "ðŸŽ® æ¸¸æˆå¹³å°",
  "ðŸŽ¯ å…¨çƒç›´è¿ž",
  "ðŸ›‘ å¹¿å‘Šæ‹¦æˆª",
  "ðŸƒ åº”ç”¨å‡€åŒ–",
  "ðŸ†Ž AdBlock",
  "ðŸŸ æ¼ç½‘ä¹‹é±¼"
];

// æŽ’åºå‡½æ•°
export function sortRouting(routing) {
  return [...routing].sort((a, b) => {
    const aIndex = ROUTING_ORDER.indexOf(a.name);
    const bIndex = ROUTING_ORDER.indexOf(b.name);
    
    if (aIndex !== -1 && bIndex !== -1) {
      return aIndex - bIndex;
    }
    
    if (aIndex !== -1) return 1;
    if (bIndex !== -1) return -1;
    
    return 0;
  });
} 
